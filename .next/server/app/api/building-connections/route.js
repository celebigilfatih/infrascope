"use strict";(()=>{var e={id:147,ids:[147]};e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8550:(e,n,t)=>{t.r(n),t.d(n,{originalPathname:()=>b,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>g});var i={};t.r(i),t.d(i,{GET:()=>u,POST:()=>d});var s=t(9303),o=t(8716),r=t(670),a=t(7070),c=t(3493);async function u(e){try{const e=await c._.buildingConnection.findMany({include:{sourceBuilding:!0,destBuilding:!0}});return a.NextResponse.json({success:!0,data:{items:e,total:e.length},timestamp:new Date})}catch(n){return console.error("Error fetching building connections:",n),a.NextResponse.json({success:!1,error:"Failed to fetch building connections",timestamp:new Date},{status:500})}}async function d(e){try{const n=await e.json(),{name:t,connectionType:i,sourceBuildingId:s,destBuildingId:o,status:r,bandwidth:u,distance:d,fiberType:p,notes:l}=n;if(!i||!s||!o)return a.NextResponse.json({success:!1,error:"connectionType, sourceBuildingId and destBuildingId are required",timestamp:new Date},{status:400});const g=await c._.buildingConnection.create({data:{name:t,connectionType:i,sourceBuildingId:s,destBuildingId:o,status:r||"ACTIVE",bandwidth:u,distance:d?parseFloat(d):null,fiberType:p,notes:l,recordingMethod:"MANUAL"}});return a.NextResponse.json({success:!0,data:g,timestamp:new Date},{status:201})}catch(n){return console.error("Error creating building connection:",n),a.NextResponse.json({success:!1,error:"Failed to create building connection",timestamp:new Date},{status:500})}}const p=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/building-connections/route",pathname:"/api/building-connections",filename:"route",bundlePath:"app/api/building-connections/route"},resolvedPagePath:"D:\\Dev\\infraScope\\app\\api\\building-connections\\route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:l,staticGenerationAsyncStorage:g,serverHooks:m}=p,b="/api/building-connections/route";function h(){return(0,r.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:g})}},3493:(e,n,t)=>{t.d(n,{_:()=>s});const i=require("@prisma/client"),s=global.prisma||new i.PrismaClient({log:[]})}};var n=require("../../../webpack-runtime.js");n.C(e);var t=n.X(0,[276,972],(()=>{return e=8550,n(n.s=e);var e}));module.exports=t})();