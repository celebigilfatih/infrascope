"use strict";(()=>{var e={id:84,ids:[84]};e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2019:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>g,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>v,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>p,POST:()=>u});var a=r(9303),i=r(8716),n=r(670),o=r(7070),c=r(3493);async function p(e){try{const e=await c._.service.findMany({include:{device:{include:{rack:{include:{room:{include:{floor:{include:{building:!0}}}}}}}},application:!0,dependencies:{include:{targetDevice:!0}}}});return o.NextResponse.json({success:!0,data:e,timestamp:new Date})}catch(t){return console.error("Error fetching services:",t),o.NextResponse.json({success:!1,error:"Failed to fetch services",timestamp:new Date},{status:500})}}async function u(e){try{const t=await e.json(),{name:r,type:s,displayName:a,description:i,status:n,port:p,protocol:u,deviceId:d,applicationId:l,criticality:m}=t;if(!r||!s||!p||!d)return o.NextResponse.json({success:!1,error:"Name, type, port and deviceId are required",timestamp:new Date},{status:400});const v=await c._.service.create({data:{name:r,type:s,displayName:a,description:i,status:n||"UNKNOWN",port:parseInt(p),protocol:u||"TCP",deviceId:d,applicationId:l,criticality:m||"MEDIUM"}});return o.NextResponse.json({success:!0,data:v,timestamp:new Date},{status:201})}catch(t){return console.error("Error creating service:",t),o.NextResponse.json({success:!1,error:"Failed to create service",timestamp:new Date},{status:500})}}const d=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/services/route",pathname:"/api/services",filename:"route",bundlePath:"app/api/services/route"},resolvedPagePath:"D:\\Dev\\infraScope\\app\\api\\services\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:v}=d,y="/api/services/route";function g(){return(0,n.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:m})}},3493:(e,t,r)=>{r.d(t,{_:()=>a});const s=require("@prisma/client"),a=global.prisma||new s.PrismaClient({log:[]})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=t.X(0,[276,972],(()=>{return e=2019,t(t.s=e);var e}));module.exports=r})();